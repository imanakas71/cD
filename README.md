# cD
同一テキスト内で、似たような行を探して表示するプログラム

## 概要
python 2.7 で組んだプログラムです。  　
漫画の自炊などをやっていると気まぐれで「！」を全角や半角にしてしまったり、タイトルの句読点を入れ損なったりして後でいろいろ後悔することがあると思います。   
500冊、1000冊と数が増えていくと、タイトルの表記ゆれの数も気になりだしますがかといってもう何がどうオカシイのかわかりません。   
このpython スクリプトはそんな時、ちょっとだけ役に立ちます。   

たとえば電子書籍の書斎一覧として、以下のようなテキストデータがあったとします。  

```
鈴木くんの究極魔法！ 第01巻.zip
鈴木くんの究極魔法! 第02巻.zip
鈴木君の究極魔法！ 第03巻.pdf
鈴木くんの究極魔法！ 第04巻.zip
```

こういったテキストに対して、「第xx巻」の部分は無視して、右から一つ目のスペースを起点に本の名前を左右に分けてしまって、左だけの類似点を評価するというプログラムです。   
```
ファイル数: 4
類似の可能性: 0.9    : 鈴木くんの究極魔法！ <--> 鈴木くんの究極魔法!
類似の可能性: 0.9    : 鈴木くんの究極魔法! <--> 鈴木くんの究極魔法！
類似の可能性: 0.9    : 鈴木くんの究極魔法! <--> 鈴木くんの究極魔法！
類似の可能性: 0.9    : 鈴木くんの究極魔法！ <--> 鈴木くんの究極魔法!
```

この例では3巻の「鈴木君」が反応しませんでしたが、これは類似率がしきい値を超えていないからです。タイトルが短くなると一文字あたりの重要度が増えてしまい、一文字違うだけで「類似度」が大きく下がってしまいます。現在は類似度85%以上で検出しているので、「鈴木君」は残念なことに検出されませんでした。

## 使い方
自炊した書籍を保存しているフォルダー内で、まず本の一覧を作ります。Windowsだと   

```
% tree /f >books.txt
```   
したあと、いらないスペースや罫線を全部消し去りファイル名だけが並んでいるファイルを作るのが手っ取り早いです。   
あと、シェルの環境変数`PYTHOIOENCODING`を`utf-8`にしないとリダイレクトができません。   
```   
PYTHONIOENCODING=utf-8
export PYTHONIOENCODING
```   
環境変数、books.txt ともに出来上がったら   
```
% cD.py
```
だけで、類似の可能性があるファイルを提示してくれます。
